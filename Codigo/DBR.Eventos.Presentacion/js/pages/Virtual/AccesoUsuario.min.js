var Eventos={ListUsuarioSinAsignar:function(){var n={};n.IdEvento=$("#txtIdEvento").val();$.ajax({url:urlListUsuarioSinAsignar,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({request:n}),success:function(n){DBR.LlenarCombo(n,"#cboUsuario",!0,!1,"Seleccionar")},error:function(n,t){console.log(t)}})},ModalListaEventoUsuario:function(n){$("#txtIdEvento").val(n);config.iniGrids.GrillaUsuarioEventos();$("#modalListaUsuarioEvento").modal("show")},SaveEventoUsuario:function(){var n={},t;n.IdEventoUsuario=$("#txtIdEventoUsuario").val();n.IdEvento=$("#txtIdEvento").val();n.IdUsuario=$("#cboUsuario").val();n.FechaInicio=$("#txtFechaInicio").val();n.FechaFin=$("#txtFechaFin").val();t=[];DBR.blockUIStar();$.ajax({url:urlSaveEventoUsuario,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({request:n,requestVideos:t}),success:function(n){DBR.blockUIStop();n.IsSuccess?($("#gridEventoUsuario").DataTable().ajax.reload(null,!1),$("#modalUsuarioEvento").modal("hide"),DBR.ToastSuccess(n.Message)):DBR.ToastError(n.Message)},error:function(n,t){DBR.blockUIStop();console.log(t)}})},EditEventoUsuario:function(n,t,i,r){Funciones.LimpiarCamposEventoUsuario();$("#txtIdEventoUsuario").val(n);$("#cboUsuario").prop("disabled",!0);$("#cboUsuario").val(t).trigger("change");$("#txtFechaInicio").datepicker("setDate",i);$("#txtFechaFin").datepicker("setDate",r);Eventos.ListVirtualVideoByEvento();$("#modalUsuarioEvento").modal("show")},DeleteEventoUsuario:function(n){var t={};t.IdEventoUsuario=n;BootstrapDialog.show({title:"Confirmación",closeByBackdrop:!1,message:"¿Esta seguro de eliminar el registro?",size:BootstrapDialog.SIZE_SMALL,buttons:[{label:"Si",cssClass:"btn-primary btn-sm",action:function(n){DBR.blockUIStar();$.ajax({url:urlDeleteEventoUsuario,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({request:t}),success:function(t){DBR.blockUIStop();n.close();t.IsSuccess?($("#gridEventoUsuario").DataTable().ajax.reload(null,!1),DBR.ToastSuccess(t.Message)):DBR.ToastError(t.Message)},error:function(n,t){DBR.blockUIStop();console.log(t)}})}},{label:"No",cssClass:"btn-default btn-sm",action:function(n){n.close()}}]})},ListVirtualVideoByEvento:function(){var n={};n.IdEvento=$("#txtIdEvento").val();n.IdEventoUsuario=$("#txtIdEventoUsuario").val();$.ajax({url:urlListEventoUsuarioVirtualVideoByEvento,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({request:n}),success:function(n){Funciones.LlenarVirtualVideo(n)},error:function(n,t){console.log(t)}})}},config={iniGrids:{GrillaEventos:function(){var n=$("#roNombre").width();$("#gridEventos").DataTable({searching:!0,ordering:!1,processing:!0,serverSide:!0,destroy:!0,responsive:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json"},ajax:{url:urlListEventoAsignacionPaged,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:function(n){return JSON.stringify({page:n})}},columns:[{data:function(n){return'<div title="'+n.NombreEvento+'" style="max-width:400px; overflow:hidden;white-space:nowrap;text-overflow: ellipsis;">'+n.NombreEvento+"<\/div>"},bSortable:!1,sClass:"text-left",width:"30%"},{data:function(n){return parseJsonDate(n.Fecha)},bSortable:!1,sClass:"text-center"},{data:function(n){return'<div title="'+n.Expositor+'" style="max-width:300px; overflow:hidden;white-space:nowrap;text-overflow: ellipsis;">'+n.Expositor+"<\/div>"},bSortable:!1,sClass:"text-left",width:"22%"},{data:"CantidadAsignados",sClass:"text-center"},{data:function(n){return'<a data-toggle="tooltip1" data-placement="bottom" title="Usuarios" onclick="Eventos.ModalListaEventoUsuario('+n.IdEvento+')" class="btn btn-primary btn-xs"><span class="fa fa-list-alt" aria-hidden="true"><\/span><\/a>'},sClass:"text-center"}],drawCallback:function(){$(".rowNombreEvento").width(n);$('[data-toggle="tooltip1"]').tooltip()}})},GrillaUsuarioEventos:function(){$("#gridEventoUsuario").DataTable({searching:!0,ordering:!1,processing:!0,serverSide:!0,destroy:!0,responsive:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json"},ajax:{url:urlListEventoUsuarioAsignadoPaged,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:function(n){var t={};return t.IdEvento=$("#txtIdEvento").val(),JSON.stringify({page:n,request:t})}},columns:[{data:"NombreUsuario"},{data:function(n){return parseJsonDate(n.FechaInicio)},bSortable:!1,sClass:"text-center"},{data:function(n){return parseJsonDate(n.FechaFin)},bSortable:!1,sClass:"text-center"},{data:function(n){var t='<a data-toggle="tooltip1" data-placement="bottom" title="Editar" onclick="Eventos.EditEventoUsuario('+n.IdEventoUsuario+","+n.IdUsuario+",'"+parseJsonDate(n.FechaInicio)+"','"+parseJsonDate(n.FechaFin)+'\')" class="btn btn-primary btn-xs"><span class="fa fa-pencil" aria-hidden="true"><\/span><\/a>',i='<a data-toggle="tooltip1" data-placement="bottom" title="Eliminar" onclick="Eventos.DeleteEventoUsuario('+n.IdEventoUsuario+')" class="btn btn-primary btn-xs"><span class="fa fa-trash-o" aria-hidden="true"><\/span><\/a>';return t+" "+i},sClass:"text-center"}],drawCallback:function(){$('[data-toggle="tooltip1"]').tooltip()}})}}},Funciones={LimpiarCamposEventoUsuario:function(){$("#cboUsuario").prop("disabled",!1);DBR.limpiarCampo("#cboUsuario");DBR.limpiarCampo("#txtFechaInicio");DBR.limpiarCampo("#txtFechaFin");$("#txtFechaInicio").datepicker("setDate","");$("#txtFechaFin").datepicker("setDate","");$(".labelCheck").removeClass("videosLabel");$("#sinVideos").addClass("hide")},LlenarVirtualVideo:function(n){var t="";$.each(n,function(n,i){let r="";i.IdEventoUsuarioVirtualVideo!=null&&(r="checked");var u='<div class="col-lg-2 col-md-3 col-sm-4 col-xs-4 videosCon"><label class="labelCheck" for="videos['+n+']">VIDEO '+(n+1)+' <\/label> <input value="'+i.IdVirtualVideo+'" id="videos['+n+']" '+r+' type="checkbox" class="chkVideos"><\/div>';t=t+u});t==""&&(t=t+'<div class="col-md-12 videosCon"><label class="videosLabel">No se encontraron videos<\/label><\/div>');$("#containerVideos").html(t);$(".chkVideos").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"})}};$(document).ready(function(){config.iniGrids.GrillaEventos();Eventos.ListUsuarioSinAsignar();$("#txtFechaInicio").datepicker({autoclose:!0,language:"es",format:"dd/mm/yyyy"});$("#txtFechaFin").datepicker({autoclose:!0,language:"es",format:"dd/mm/yyyy"});$("#btnAgregarEventoUsuario").on("click",function(){$("#txtIdEventoUsuario").val(0);Funciones.LimpiarCamposEventoUsuario();$("#modalUsuarioEvento").modal("show")});$("#btnGuardarEventoUsuario").on("click",function(){var n=!0;DBR.validarCampo("#cboUsuario")||(n=!1);DBR.validarCampo("#txtFechaInicio")||(n=!1);DBR.validarCampo("#txtFechaFin")||(n=!1);n&&Eventos.SaveEventoUsuario()});$("#modalUsuarioEvento").on("hidden.bs.modal",function(){$("body").addClass("modal-open")})});