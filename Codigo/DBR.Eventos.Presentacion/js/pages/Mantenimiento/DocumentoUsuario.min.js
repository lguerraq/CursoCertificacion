var GrillaDocumentos,config={iniGrids:{GrillaDocumentos:function(){GrillaDocumentos=$("#gridDocumentos").DataTable({searching:!1,ordering:!1,processing:!0,serverSide:!0,destroy:!0,responsive:!0,stateSave:!0,paging:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json"},ajax:{url:urlListDocumentoPaginado,type:"POST",datatype:"json",contentType:"application/json; charset=UTF-8",data:function(){let n={IdEmpresa:$("#cboEmpresas").val(),IdDocumentoPadre:$("#txtIdDocumentoPadre").val()};return JSON.stringify({request:n})}},columns:[{data:function(n){let t="";switch(n.Tipo){case 0:t='<a title="Raíz" onclick="Funciones.VerCarpeta(0)" class="folder-personalizado"><\/i><i class="fa fa-folder fa-folder-open"><\/i> [..Raíz..] \\<\/a>'+n.NombreOriginal+' <i class="fa fa-reply"><\/i>';break;case 1:t='<a title="Abrir" onclick="Funciones.VerCarpeta('+n.IdDocumento+')" class="folder-personalizado"><i class="fa fa-folder"><\/i> '+n.NombreOriginal+"<\/a>";break;case 2:t=n.Extension=="PDF"?'<a class="file-personalizado"><i class="fa fa-file-pdf-o"><\/i> '+n.NombreOriginal+"<\/a>":n.Extension=="DOC"||n.Extension=="DOCX"?'<a class="file-personalizado"><i class="fa fa-file-word-o"><\/i> '+n.NombreOriginal+"<\/a>":n.Extension=="ZIP"?'<a class="file-personalizado"><i class="fa fa-file-zip-o"><\/i> '+n.NombreOriginal+"<\/a>":n.Extension=="XLSX"||n.Extension=="XLS"?'<a class="file-personalizado"><i class="fa fa-file-excel-o"><\/i> '+n.NombreOriginal+"<\/a>":n.Extension=="PPTX"||n.Extension=="PPT"?'<a class="file-personalizado"><i class="fa fa-file-powerpoint-o"><\/i> '+n.NombreOriginal+"<\/a>":n.Extension=="PNG"||n.Extension=="JPG"?'<a class="file-personalizado"><i class="fa fa-file-image-o"><\/i> '+n.NombreOriginal+"<\/a>":'<a class="file-personalizado"><i class="fa fa-file-text-o"><\/i> '+n.NombreOriginal+"<\/a>"}return t},sClass:"text-left"},{data:function(n){return parseJsonDate(n.FechaCreacion)+" "+parseJsonTime(n.FechaCreacion)},sClass:"text-left"},{data:function(n){return parseJsonDate(n.FechaModificacion)+" "+parseJsonTime(n.FechaModificacion)},sClass:"text-left"},{data:function(n){return n.Tamaño>0?n.Tamaño>1048576?(n.Tamaño/1048576).toFixed(2)+"Mb":(n.Tamaño/1024).toFixed(2)+"Kb":""},sClass:"text-right"},{data:function(n){var i;let t;switch(n.Tipo){case 0:t="";break;case 1:i='<a data-toggle="tooltip1" data-placement="bottom" title="Descargar carpeta" onclick="Eventos.DownloadCarpeta('+n.IdDocumento+')" class="btn btn-primary btn-xs"><span class="fa fa-cloud-download" aria-hidden="true"><\/span><\/a>';t=i;break;case 2:i='<a data-toggle="tooltip1" data-placement="bottom" title="Descargar documento" onclick="Eventos.DownloadDocumento('+n.IdDocumento+')" class="btn btn-primary btn-xs"><span class="fa fa-cloud-download" aria-hidden="true"><\/span><\/a>';t=i}return t},sClass:"text-center"}],drawCallback:function(){$('[data-toggle="tooltip1"]').tooltip({container:"body"})}})}}},Eventos={GetEmpresaByUsuario:function(){DBR.blockUIStar();$.ajax({url:urlGetEmpresaByUsuario,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({}),success:function(n){DBR.blockUIStop();$("#lblEmpresa").html("EMPRESA: "+n.RazonSocial)},error:function(n,t){console.log(t);DBR.blockUIStop()}})},DownloadDocumento:function(n){window.location.href=urlDownloadDocumento+"?IdDocumento="+n},DownloadCarpeta:function(n){window.location.href=urlDownloadCarpeta+"?IdDocumento="+n}},Funciones={VerCarpeta:function(n){$("#txtIdDocumentoPadre").val(n);GrillaDocumentos.ajax.reload()}};$(document).ready(function(){Eventos.GetEmpresaByUsuario();config.iniGrids.GrillaDocumentos();$("#btnActualizar").on("click",function(){GrillaDocumentos.ajax.reload()})});