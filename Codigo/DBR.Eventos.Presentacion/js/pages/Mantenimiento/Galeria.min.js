var config={ini:function(){$.ajaxSetup({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:{}})},iniGrids:{GrillaGaleria:function(){$("#gridGaleria").DataTable({searching:!1,ordering:!1,processing:!0,serverSide:!0,destroy:!0,responsive:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json"},ajax:{url:urlListGaleria,type:"POST",datatype:"json",data:{}},columns:[{data:"Nombre"},{data:function(n){return n.Activo?"SI":"NO"},sClass:"text-center"},{data:function(n){return'<a data-toggle="tooltip1" data-placement="bottom" title="Ver foto" onclick="Eventos.GetFoto(\''+n.Nombre+'\')" class=""><i class="fa fa-image" aria-hidden="true"><\/i><\/a>'},sClass:"text-center"},{data:function(n){var r='<a data-toggle="tooltip1" data-placement="bottom" title="Eliminar foto" onclick="Eventos.DeleteEvento('+n.IdGaleria+')" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-trash" aria-hidden="true"><\/span><\/a>',t='<a data-toggle="tooltip1" data-placement="bottom" title="Activar" onclick="Eventos.UpdateEstadoGaleria('+n.IdGaleria+',1)" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-ok" aria-hidden="true"><\/span><\/a>',i='<a data-toggle="tooltip1" data-placement="bottom" title="Desactivar" onclick="Eventos.UpdateEstadoGaleria('+n.IdGaleria+',0)" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-remove" aria-hidden="true"><\/span><\/a>';return n.Activo?t="":i="",r+" "+t+" "+i},sClass:"text-center"}],drawCallback:function(){$('[data-toggle="tooltip1"]').tooltip()}})}}},Eventos={SaveGaleria:function(){var t=document.getElementById("fileFoto"),n=new FormData;n.append("documento",t.files[0]);n.append("Descripcion",$("#txtDescripcion").val());DBR.blockUIStar();$.ajax({url:urlSaveGaleria,type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,data:n}).done(function(n){DBR.blockUIStop();n.IsSuccess?($("#gridGaleria").DataTable().ajax.reload(),$("#modalGaleria").modal("hide"),DBR.ToastSuccess(n.Message)):DBR.ToastError(n.Message)}).fail(function(n){DBR.blockUIStop();console.log(n)})},GetFoto:function(n){$("#viewFoto").attr("src",urlCarpetaGaleria+n);$("#modalVerImagen").modal("show")},DeleteEvento:function(n){var t={};t.IdGaleria=n;BootstrapDialog.show({title:"Confirmación",closeByBackdrop:!1,message:"¿Esta seguro de eliminar el registro?",size:BootstrapDialog.SIZE_SMALL,buttons:[{label:"Si",cssClass:"btn-primary btn-sm",action:function(n){DBR.blockUIStar();$.ajax({url:urlDeleteGaleria,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({request:t}),success:function(t){DBR.blockUIStop();n.close();t.IsSuccess?($("#gridGaleria").DataTable().ajax.reload(),DBR.ToastSuccess(t.Message)):DBR.ToastError(t.Message)},error:function(n,t){DBR.blockUIStop();console.log(t)}})}},{label:"No",cssClass:"btn-default btn-sm",action:function(n){n.close()}}]})},UpdateEstadoGaleria:function(n,t){var i={};i.IdGaleria=n;i.Activo=t;DBR.blockUIStar();$.ajax({url:urlUpdateActivoGaleria,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({request:i}),success:function(n){DBR.blockUIStop();n.IsSuccess?($("#gridGaleria").DataTable().ajax.reload(),DBR.ToastSuccess(n.Message)):DBR.ToastError(n.Message)},error:function(n,t){DBR.blockUIStop();console.log(t)}})}};$(document).ready(function(){config.iniGrids.GrillaGaleria();$("#btnAgregarFoto").on("click",function(){$("#fileFoto").filestyle("clear");$("#fileFoto").parent().removeClass("has-error");$("#fileFoto").next().next().addClass("hide");$("#modalGaleria").modal("show")});$("#btnGuardarFoto").on("click",function(){var n=!0,t=document.getElementById("fileFoto");t.files.length==0?($("#fileFoto").parent().addClass("has-error"),$("#fileFoto").next().next().removeClass("hide"),n=!1):($("#fileFoto").parent().removeClass("has-error"),$("#fileFoto").next().next().addClass("hide"),t.files[0].size>1048576&&(DBR.ToastWarning("Verifique que el archivo adjunto no supere el 1MB"),n=!1));DBR.validarCampo("#txtDescripcion")||(n=!1);n&&Eventos.SaveGaleria()})});